phyto%>%
rename(time=`time#NA`)%>%
mutate(Date=ymd(str_sub(time,start = 0,end = 10)))%>%
select(Date,contains(variablePhyto_x))
variablePhyto_x=BUNCH_DEMAND
variablePhyto_x='BUNCH_DEMAND'
phyto%>%
rename(time=`time#NA`)%>%
mutate(Date=ymd(str_sub(time,start = 0,end = 10)))%>%
select(Date,contains(variablePhyto_x))
sub_phyto=phyto%>%
rename(time=`time#NA`)%>%
mutate(Date=ymd(str_sub(time,start = 0,end = 10)))%>%
select(Date,contains('STATE',variablePhyto_x))%>%
tidyr::gather('number',"value",-c(Date))
sub_phyto=phyto%>%
rename(time=`time#NA`)%>%
mutate(Date=ymd(str_sub(time,start = 0,end = 10)))%>%
select(Date,contains('STATE',variablePhyto_x))
phyto%>%
rename(time=`time#NA`)%>%
mutate(Date=ymd(str_sub(time,start = 0,end = 10)))%>%
select(Date,contains(variablePhyto_x),contains('STATE'))
phyto%>%
rename(time=`time#NA`)%>%
mutate(Date=ymd(str_sub(time,start = 0,end = 10)))%>%
select(Date,contains(variablePhyto_x),contains('STATE'))%>%
tidyr::gather('number',"value",-c(Date))
sub_phyto=phyto%>%
rename(time=`time#NA`)%>%
mutate(Date=ymd(str_sub(time,start = 0,end = 10)))%>%
select(Date,contains(variablePhyto_x),contains('STATE'))%>%
tidyr::gather('number',"value",-c(Date))%>%
mutate(number=str_remove(string = number,pattern = paste0(variablePhyto_x,'#')))%>%
arrange(Date,number)
sub_phyto=phyto%>%
rename(time=`time#NA`)%>%
mutate(Date=ymd(str_sub(time,start = 0,end = 10)))%>%
select(Date,contains(variablePhyto_x))%>%
tidyr::gather('number',"value",-c(Date))%>%
mutate(number=str_remove(string = number,pattern = paste0(variablePhyto_x,'#')))%>%
arrange(Date,number)
sub_phyto=phyto%>%
rename(time=`time#NA`)%>%
mutate(Date=ymd(str_sub(time,start = 0,end = 10)))%>%
select(Date,contains(variablePhyto_x),contains('STATE'))%>%
tidyr::gather('number',"value",-c(Date))%>%
mutate(number=str_remove(string = number,pattern = paste0(variablePhyto_x,'#')))%>%
arrange(Date,number)
View(sub_phyto)
sub_phyto=phyto%>%
rename(time=`time#NA`)%>%
mutate(Date=ymd(str_sub(time,start = 0,end = 10)))%>%
select(Date,contains(variablePhyto_x),contains('STATE'))%>%
tidyr::gather('number',"value",-c(Date))%>%
separate(number,into = c('variable','numero'),sep = '#')
View(sub_phyto)
sub_phyto=phyto%>%
rename(time=`time#NA`)%>%
mutate(Date=ymd(str_sub(time,start = 0,end = 10)))%>%
select(Date,contains(variablePhyto_x),contains('STATE'))%>%
tidyr::gather('number',"value",-c(Date))%>%
separate(number,into = c('variable','numero'),sep = '#')%>%
arrange(Date,variable,numero)
sub_phyto=phyto%>%
rename(time=`time#NA`)%>%
mutate(Date=ymd(str_sub(time,start = 0,end = 10)))%>%
select(Date,contains(variablePhyto_x))%>%
tidyr::gather('number',"value",-c(Date))%>%
mutate(number=str_remove(string = number,pattern = paste0(variablePhyto_x,'#')))%>%
arrange(Date,number)
sub_state=phyto%>%
rename(time=`time#NA`)%>%
mutate(Date=ymd(str_sub(time,start = 0,end = 10)))%>%
select(Date,contains('STATE'))%>%
tidyr::gather('number',"state",-c(Date))%>%
mutate(number=str_remove(string = number,pattern = paste0('STATE','#')))%>%
arrange(Date,number)
View(sub_state)
View(sub_phyto)
View(sub_state)
INFLO_STATUS=c(1,9,10,12,17,18,20,42,50,82,146,266)
sex=c('undeterminated','male','male','male','female','female','female','male','female','female','female','male')
state=c('initiated','initiated','non aborted','aborted','initiated','non aborted','aborted','spathe','spathe','oleosynthesis','harvested','senescent')
table_state=table_state%>%
mutate(state=as.character(state),
INFLO_STATUS=as.numeric(INFLO_STATUS))
table_state=data.frame(INFLO_STATUS,sex,state)
levels(table_state$state)=list("initiated"="initiated","aborted"='aborted','non aborted'='non aborted','spathe'='spathe','oleosynthesis'='oleosynthesis','harvested'='harvested','senescent'='senescent')
table_state=table_state%>%
mutate(state=as.character(state),
INFLO_STATUS=as.numeric(INFLO_STATUS))
table_state
sub_state=phyto%>%
rename(time=`time#NA`)%>%
mutate(Date=ymd(str_sub(time,start = 0,end = 10)))%>%
select(Date,contains('STATE'))%>%
tidyr::gather('number',"INFLO_STATUS",-c(Date))%>%
mutate(number=str_remove(string = number,pattern = paste0('STATE','#')))%>%
arrange(Date,number)
View(sub_state)
table_state
sub_state=merge(sub_state,table_state)
sub_state
sub_phyto=cbind(sub_phyto,sub_state%>%select(sex,state))
View(sub_phyto)
sub_phyto
sub_phyto=phyto%>%
rename(time=`time#NA`)%>%
mutate(Date=ymd(str_sub(time,start = 0,end = 10)))%>%
select(Date,contains(variablePhyto_x))%>%
tidyr::gather('number',"value",-c(Date))%>%
mutate(number=str_remove(string = number,pattern = paste0(variablePhyto_x,'#')))%>%
arrange(Date,number)
variablePhyto_x
sub_state=phyto%>%
rename(time=`time#NA`)%>%
mutate(Date=ymd(str_sub(time,start = 0,end = 10)))%>%
select(Date,contains('STATE'))%>%
tidyr::gather('number',"INFLO_STATUS",-c(Date))%>%
mutate(number=str_remove(string = number,pattern = paste0('STATE','#')))%>%
arrange(Date,number)
sub_state=merge(sub_state,table_state)
View(sub_state)
runApp('App_raph.R')
View(phyto)
phytomerNumber
phytomerNumber=10
sub_phyto=phyto%>%
rename(time=`time#NA`)%>%
mutate(Date=ymd(str_sub(time,start = 0,end = 10)))%>%
select(Date,contains(variablePhyto_x))
sub_phyto=phyto%>%
rename(time=`time#NA`)%>%
mutate(Date=ymd(str_sub(time,start = 0,end = 10)))%>%
select(Date,contains(variablePhyto_x),contains(phytomerNumber))
phytomerNumber
sub_phyto=phyto%>%
rename(time=`time#NA`)%>%
mutate(Date=ymd(str_sub(time,start = 0,end = 10)))%>%
select(Date,contains(variablePhyto_x),contains(paste(phytomerNumber)))
View(sub_phyto)
phyto%>%
rename(time=`time#NA`)%>%
mutate(Date=ymd(str_sub(time,start = 0,end = 10)))%>%
select(Date,contains(variablePhyto_x),contains(paste(phytomerNumber)))
sub_phyto=phyto%>%
rename(time=`time#NA`)%>%
mutate(Date=ymd(str_sub(time,start = 0,end = 10)))%>%
select(Date,contains(variablePhyto_x),contains(paste0("#",phytomerNumber)))
View(sub_phyto)
sub_phyto=phyto%>%
rename(time=`time#NA`)%>%
mutate(Date=ymd(str_sub(time,start = 0,end = 10)))%>%
select(Date,contains(variablePhyto_x))%>%
select(Date,contains(paste0("#",phytomerNumber)))
View(sub_phyto)
paste0("#",phytomerNumber)
sub_phyto=phyto%>%
rename(time=`time#NA`)%>%
mutate(Date=ymd(str_sub(time,start = 0,end = 10)))%>%
select(Date,contains(variablePhyto_x))%>%
select(Date,contains(paste0("#",phytomerNumber," ")))
View(sub_phyto)
sub_phyto=phyto%>%
rename(time=`time#NA`)%>%
mutate(Date=ymd(str_sub(time,start = 0,end = 10)))%>%
select(Date,contains(variablePhyto_x))%>%
select(Date,contains(paste0("#",phytomerNumber,"")))
View(sub_phyto)
sub_phyto=phyto%>%
rename(time=`time#NA`)%>%
mutate(Date=ymd(str_sub(time,start = 0,end = 10)))%>%
select(Date,contains(variablePhyto_x))%>%
select(Date,contains(paste0("#",phytomerNumber,'\\b')))
View(sub_phyto)
sub_phyto=phyto%>%
rename(time=`time#NA`)%>%
mutate(Date=ymd(str_sub(time,start = 0,end = 10)))%>%
select(Date,contains(variablePhyto_x))
View(sub_phyto)
phytomerNumber
sub_phyto=phyto%>%
rename(time=`time#NA`)%>%
mutate(Date=ymd(str_sub(time,start = 0,end = 10)))%>%
select(Date,contains(variablePhyto_x))%>%
select(Date,contains(paste0("#",phytomerNumber,'\\b')))
View(sub_phyto)
sub_phyto=phyto%>%
rename(time=`time#NA`)%>%
mutate(Date=ymd(str_sub(time,start = 0,end = 10)))%>%
select(Date,contains(variablePhyto_x))%>%
select(Date,contains(paste0("#",phytomerNumber,'\\b',collapse='|')))
View(sub_phyto)
sub_phyto=phyto%>%
rename(time=`time#NA`)%>%
mutate(Date=ymd(str_sub(time,start = 0,end = 10)))%>%
select(Date,contains(variablePhyto_x))%>%
select(Date,contains(paste0("#",phytomerNumber)))
View(sub_phyto)
sub_phyto=phyto%>%
rename(time=`time#NA`)%>%
mutate(Date=ymd(str_sub(time,start = 0,end = 10)))%>%
select(Date,contains(variablePhyto_x))%>%
select(Date,contains(paste0("#",phytomerNumber)))%>%
tidyr::gather('number',"value",-c(Date))%>%
mutate(number=str_remove(string = number,pattern = paste0(variablePhyto_x,'#')))%>%
filter(number %in% phytomerNumber)%>%
arrange(Date,number)
sub_state=phyto%>%
rename(time=`time#NA`)%>%
mutate(Date=ymd(str_sub(time,start = 0,end = 10)))%>%
select(Date,contains('STATE'))%>%
select(Date,contains(paste0("#",phytomerNumber)))%>%
tidyr::gather('number',"INFLO_STATUS",-c(Date))%>%
mutate(number=str_remove(string = number,pattern = paste0('STATE','#')))%>%
filter(number %in% phytomerNumber)%>%
arrange(Date,number)
View(sub_state)
sub_phyto
View(sub_phyto)
sub_state=merge(sub_state,table_state)
sub_phyto=cbind(sub_phyto,sub_state%>%select(sex,state))
gr_Phyto=sub_phyto%>%
mutate(num=paste('phyto #',sprintf( '%03d',as.numeric(number))))%>%
arrange(Date,number)%>%
group_by(number)%>%
ggplot(aes(x=Date,y=value,col=state,pch=sex))+
geom_point(size=1)+
geom_line(aes(group=num))+
scale_color_viridis_d()+
ylab(variablePhyto_x)+
# xlab(variablePhyto_y)
theme(legend.position='right')
gr_Phyto
runApp('App_raph.R')
gr_Phyto=sub_phyto%>%
mutate(num=paste('phyto #',sprintf( '%03d',as.numeric(number))))%>%
arrange(Date,number)%>%
group_by(number)%>%
ggplot(aes(x=Date,y=value,col=state,pch=sex))+
geom_point(size=1)+
geom_line(aes(group=num))+
scale_color_viridis_d()+
ylab(variablePhyto_x)+
# xlab(variablePhyto_y)
theme(legend.position='right')
gr_Phyto
gr_Phyto=sub_phyto%>%
mutate(num=paste('phyto #',sprintf( '%03d',as.numeric(number))))%>%
arrange(Date,number)%>%
group_by(number)%>%
ggplot(aes(x=Date,y=value,col=state,pch=sex))+
geom_point(size=2)+
geom_line(aes(group=num))+
scale_color_viridis_d()+
ylab(variablePhyto_x)+
scale_shape_manual(undeterminated='3',male='2',female='15')+
# xlab(variablePhyto_y)
theme(legend.position='right')
gr_Phyto=sub_phyto%>%
mutate(num=paste('phyto #',sprintf( '%03d',as.numeric(number))))%>%
arrange(Date,number)%>%
group_by(number)%>%
ggplot(aes(x=Date,y=value,col=state,pch=sex))+
geom_point(size=2)+
geom_line(aes(group=num))+
scale_color_viridis_d()+
ylab(variablePhyto_x)+
scale_shape_manual(values = c(undeterminated='3',male='2',female='15'))+
# xlab(variablePhyto_y)
theme(legend.position='right')
gr_Phyto
gr_Phyto=sub_phyto%>%
mutate(num=paste('phyto #',sprintf( '%03d',as.numeric(number))))%>%
arrange(Date,number)%>%
group_by(number)%>%
ggplot(aes(x=Date,y=value,col=state,pch=sex))+
geom_point(size=2)+
geom_line(aes(group=num))+
scale_color_viridis_d()+
ylab(variablePhyto_x)+
scale_shape_manual(values = c(undeterminated=3,male=2,female=15))+
# xlab(variablePhyto_y)
theme(legend.position='right')
gr_Phyto
ggplotly(gr_Phyto)
gr_Phyto=sub_phyto%>%
mutate(num=paste('phyto #',sprintf( '%03d',as.numeric(number))))%>%
arrange(Date,number)%>%
group_by(number)%>%
ggplot(aes(x=Date,y=value,col=state,pch=sex))+
geom_point(size=2)+
geom_line(aes(group=num))+
scale_color_viridis_d()+
ylab(variablePhyto_x)+
scale_shape_manual(values = c(undeterminated=1,male=2,female=15))+
# xlab(variablePhyto_y)
theme(legend.position='right')
gr_Phyto
gr_Phyto=sub_phyto%>%
mutate(num=paste('phyto #',sprintf( '%03d',as.numeric(number))))%>%
arrange(Date,number)%>%
group_by(number)%>%
ggplot(aes(x=Date,y=value,col=state,pch=sex))+
geom_point(size=5)+
geom_line(aes(group=num))+
scale_color_viridis_d()+
ylab(variablePhyto_x)+
scale_shape_manual(values = c(undeterminated=1,male=2,female=15))+
# xlab(variablePhyto_y)
theme(legend.position='right')
gr_Phyto
gr_Phyto=sub_phyto%>%
mutate(num=paste('phyto #',sprintf( '%03d',as.numeric(number))))%>%
arrange(Date,number)%>%
group_by(number)%>%
ggplot(aes(x=Date,y=value,col=state,pch=sex))+
geom_point(size=5)+
geom_line(aes(group=num))+
scale_color_viridis_d()+
ylab(variablePhyto_x)+
scale_shape_manual(values = c(undeterminated='und',male=2,female=15))+
# xlab(variablePhyto_y)
theme(legend.position='right')
gr_Phyto
gr_Phyto=sub_phyto%>%
mutate(num=paste('phyto #',sprintf( '%03d',as.numeric(number))))%>%
arrange(Date,number)%>%
group_by(number)%>%
ggplot(aes(x=Date,y=value,col=state,pch=sex))+
geom_point(size=5)+
geom_line(aes(group=num))+
scale_color_viridis_d()+
ylab(variablePhyto_x)+
scale_shape_manual(values = c(undeterminated='U',male=2,female=15))+
# xlab(variablePhyto_y)
theme(legend.position='right')
gr_Phyto
gr_Phyto=sub_phyto%>%
mutate(num=paste('phyto #',sprintf( '%03d',as.numeric(number))))%>%
arrange(Date,number)%>%
group_by(number)%>%
ggplot(aes(x=Date,y=value,col=state,pch=sex))+
geom_point(size=5)+
geom_line(aes(group=num))+
scale_color_viridis_d()+
ylab(variablePhyto_x)+
scale_shape_manual(values = c(undeterminated=1,male=2,female=15))+
# xlab(variablePhyto_y)
theme(legend.position='right')
gr_Phyto
gr_Phyto=sub_phyto%>%
mutate(num=paste('phyto #',sprintf( '%03d',as.numeric(number))))%>%
arrange(Date,number)%>%
group_by(number)%>%
ggplot(aes(x=Date,y=value,col=state,pch=sex))+
geom_point(size=1)+
geom_line(aes(group=num))+
scale_color_viridis_d()+
ylab(variablePhyto_x)+
scale_shape_manual(values = c(undeterminated=1,male=2,female=15))+
# xlab(variablePhyto_y)
theme(legend.position='right')
gr_Phyto
gr_Phyto=sub_phyto%>%
mutate(num=paste('phyto #',sprintf( '%03d',as.numeric(number))))%>%
arrange(Date,number)%>%
group_by(number)%>%
ggplot(aes(x=Date,y=value,col=state,size=sex))+
geom_point()+
geom_line(aes(group=num))+
scale_color_viridis_d()+
ylab(variablePhyto_x)+
# scale_shape_manual(values = c(undeterminated=1,male=2,female=15))+
# xlab(variablePhyto_y)
theme(legend.position='right')
gr_Phyto
runApp('App_raph.R')
gr_Phyto=sub_phyto%>%
mutate(num=paste('phyto #',sprintf( '%03d',as.numeric(number))))%>%
arrange(Date,number)%>%
group_by(number)%>%
ggplot(aes(x=Date,y=value,col=state,pch=sex))+
geom_point()+
geom_line(aes(group=num))+
scale_color_viridis_d()+
ylab(variablePhyto_x)+
# scale_shape_manual(values = c(undeterminated=1,male=2,female=15))+
# xlab(variablePhyto_y)
theme(legend.position='right')
gr_Phyto
gr_Phyto=sub_phyto%>%
mutate(num=paste('phyto #',sprintf( '%03d',as.numeric(number))))%>%
arrange(Date,number)%>%
group_by(number)%>%
ggplot(aes(x=Date,y=value,col=sex,pch=state))+
geom_point()+
geom_line(aes(group=num))+
scale_color_viridis_d()+
ylab(variablePhyto_x)+
# scale_shape_manual(values = c(undeterminated=1,male=2,female=15))+
# xlab(variablePhyto_y)
theme(legend.position='right')
gr_Phyto
runApp('App_raph.R')
INFLO_STATUS=c(1,9,10,12,17,18,20,42,50,82,146,266)
sex=c('undeterminated','male','male','male','female','female','female','male','female','female','female','male')
state=c('initiated','initiated','non aborted','aborted','initiated','non aborted','aborted','spathe','spathe','oleosynthesis','harvested','senescent')
table_state=data.frame(INFLO_STATUS,sex,state)
levels(table_state$state)=list("initiated"="initiated","aborted"='aborted','non aborted'='non aborted','spathe'='spathe','oleosynthesis'='oleosynthesis','harvested'='harvested','senescent'='senescent')
table_state=table_state%>%
mutate(state=as.character(state),
INFLO_STATUS=as.numeric(INFLO_STATUS))
table_state
sub_state=phyto%>%
rename(time=`time#NA`)%>%
mutate(Date=ymd(str_sub(time,start = 0,end = 10)))%>%
select(Date,contains('STATE'))%>%
select(Date,contains(paste0("#",phytomerNumber)))%>%
tidyr::gather('number',"INFLO_STATUS",-c(Date))
sub_state
sub_state=phyto%>%
rename(time=`time#NA`)%>%
mutate(Date=ymd(str_sub(time,start = 0,end = 10)))%>%
select(Date,contains('STATE'))%>%
select(Date,contains(paste0("#",phytomerNumber)))%>%
tidyr::gather('number',"INFLO_STATUS",-c(Date))%>%
mutate(number=str_remove(string = number,pattern = paste0('STATE','#')))%>%
filter(number %in% phytomerNumber)%>%
arrange(Date,number)
View(sub_state)
sub_state
sub_state=phyto%>%
rename(time=`time#NA`)%>%
mutate(Date=ymd(str_sub(time,start = 0,end = 10)))%>%
select(Date,contains('STATE'))%>%
select(Date,contains(paste0("#",phytomerNumber)))%>%
tidyr::gather('number',"INFLO_STATUS",-c(Date))%>%
mutate(number=str_remove(string = number,pattern = paste0('STATE','#')),
INLO_STATUS=as.numeric(INFLO_STATUS))%>%
filter(number %in% phytomerNumber)%>%
arrange(Date,number)
sub_state=phyto%>%
rename(time=`time#NA`)%>%
mutate(Date=ymd(str_sub(time,start = 0,end = 10)))%>%
select(Date,contains('STATE'))%>%
select(Date,contains(paste0("#",phytomerNumber)))%>%
tidyr::gather('number',"INFLO_STATUS",-c(Date))%>%
mutate(number=str_remove(string = number,pattern = paste0('STATE','#')),
INFLO_STATUS=as.numeric(INFLO_STATUS))%>%
filter(number %in% phytomerNumber)%>%
arrange(Date,number)
sub_state=merge(sub_state,table_state)
View(sub_state)
unique(sub_state$sex)
sub_state=phyto%>%
rename(time=`time#NA`)%>%
mutate(Date=ymd(str_sub(time,start = 0,end = 10)))%>%
select(Date,contains('STATE'))%>%
select(Date,contains(paste0("#",phytomerNumber)))%>%
tidyr::gather('number',"INFLO_STATUS",-c(Date))%>%
mutate(number=str_remove(string = number,pattern = paste0('STATE','#')),
INFLO_STATUS=as.numeric(INFLO_STATUS))%>%
filter(number %in% phytomerNumber)%>%
arrange(Date,number)
unique(sub_state$INFLO_STATUS)
runApp('App_raph.R')
phytomerNumber=c(41,38)
sub_phyto=phyto%>%
rename(time=`time#NA`)%>%
mutate(Date=ymd(str_sub(time,start = 0,end = 10)))%>%
select(Date,contains(variablePhyto_x))%>%
select(Date,contains(paste0("#",phytomerNumber)))%>%
tidyr::gather('number',"value",-c(Date))%>%
mutate(number=str_remove(string = number,pattern = paste0(variablePhyto_x,'#')))%>%
filter(number %in% phytomerNumber)%>%
arrange(Date,number)
View(sub_phyto)
sub_state=phyto%>%
rename(time=`time#NA`)%>%
mutate(Date=ymd(str_sub(time,start = 0,end = 10)))%>%
select(Date,contains('STATE'))%>%
select(Date,contains(paste0("#",phytomerNumber)))%>%
tidyr::gather('number',"INFLO_STATUS",-c(Date))%>%
mutate(number=str_remove(string = number,pattern = paste0('STATE','#')),
INFLO_STATUS=as.numeric(INFLO_STATUS))%>%
filter(number %in% phytomerNumber)%>%
arrange(Date,number)
View(sub_state)
sub_state=merge(sub_state,table_state)
View(sub_state)
sub_state=merge(sub_state,table_state)%>%
arrange(Date,number)
sub_phyto=cbind(sub_phyto,sub_state%>%select(sex,state))
gr_Phyto=sub_phyto%>%
mutate(num=paste('phyto #',sprintf( '%03d',as.numeric(number))))%>%
arrange(Date,number)%>%
group_by(number)%>%
ggplot(aes(x=Date,y=value,col=sex,pch=state))+
geom_point()+
geom_line(aes(group=num))+
scale_color_viridis_d()+
ylab(variablePhyto_x)+
# scale_shape_manual(values = c(undeterminated=1,male=2,female=15))+
# xlab(variablePhyto_y)
theme(legend.position='right')
ggplotly(gr_Phyto)
View(sub_state)
runApp('App_raph.R')
runApp('App_raph.R')
runApp('App_raph.R')
